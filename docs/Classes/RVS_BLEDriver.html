<!DOCTYPE html>
<html lang="en">
  <head>
    <title>RVS_BLEDriver Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset="utf-8">
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>

    <a name="//apple_ref/swift/Class/RVS_BLEDriver" class="dashAnchor"></a>

    <a title="RVS_BLEDriver Class Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="../index.html">
          RVS_BLEDriver_iOS Docs
        </a>
         (100% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="../search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/RiftValleySoftware/RVS_BLEDriver">
            <img class="header-icon" src="../img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="../index.html">RVS_BLEDriver_iOS Reference</a>
      <img class="carat" src="../img/carat.png" />
      RVS_BLEDriver Class Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/RVS_BLEDevice.html">RVS_BLEDevice</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes.html#/s:17RVS_BLEDriver_iOS0A36_BLEDevice_DeviceSpec_GeneralPurposeC">RVS_BLEDevice_DeviceSpec_GeneralPurpose</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/RVS_BLEDriver.html">RVS_BLEDriver</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/RVS_BLEDriver/Errors.html">– Errors</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/RVS_BLE_BearTooth_Service.html">RVS_BLE_BearTooth_Service</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/RVS_BLE_BearTooth_Service/RVS_BLE_GATT_UUID.html">– RVS_BLE_GATT_UUID</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/RVS_BLE_DeviceInfo_Service.html">RVS_BLE_DeviceInfo_Service</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/RVS_BLE_DeviceInfo_Service/RVS_BLE_GATT_UUID.html">– RVS_BLE_GATT_UUID</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/RVS_BLE_goTenna_Service.html">RVS_BLE_goTenna_Service</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Classes/RVS_BLE_goTenna_Service/RVS_BLE_GATT_UUID.html">– RVS_BLE_GATT_UUID</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Enums/RVS_BLEDriver_ValueProtocol_Type_Enum.html">RVS_BLEDriver_ValueProtocol_Type_Enum</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/RVS_BLECharacteristic.html">RVS_BLECharacteristic</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/RVS_BLEService.html">RVS_BLEService</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Extensions/StringProtocol.html">StringProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/RVS_BLEDeviceDelegate.html">RVS_BLEDeviceDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/RVS_BLEDriverDelegate.html">RVS_BLEDriverDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/RVS_BLEDriver_DeviceProtocol.html">RVS_BLEDriver_DeviceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/RVS_BLEDriver_ServiceProtocol.html">RVS_BLEDriver_ServiceProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/RVS_BLEDriver_ValueProtocol.html">RVS_BLEDriver_ValueProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="../Protocols/RVS_SequenceProtocol.html">RVS_SequenceProtocol</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            <h1>RVS_BLEDriver</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">RVS_BLEDriver</span> <span class="p">:</span> <span class="kt">NSObject</span></code></pre>

                </div>
              </div>
            <p>This class implements the main <q>skeleton</q> of the driver API.</p>

<p>This driver has two modes: Not scanning, in which case it does not discover new devices, but the devices it does have may still be active and updating, and
Scanning, in which case, it looks for Bluetooth devices.</p>

<p>If it finds a device, it adds it to a <q>Holding Pen,</q> where it lives until some basic information has been read; namely, the Device Info service, and the proprietary Bluetooth service.</p>

<p>After all that has been gathered, the device is considered <q>shiny,</q> and gets added to our main Array, and then it will ignore the same device, if that device shows up again in discovery.</p>

<p>The idea is to build up an object model of the Bluetooth devices, and represent them to the API consumer as simply as possible.</p>

<p>It is important that the consumer provide delegates to the driver, device and service instances. Most of the action happens in delegate callbacks.</p>

<p>Only the entities in the <a href="https://github.com/RiftValleySoftware/RVS_BLEDriver/blob/master/RVS_BLEDriver/RVS_BLEDriver_Public.swift">RVS_BLEDriver_Public.swift</a> extension should be considered useful for API consumers.</p>

<p>You may also treat the instance as <a href="https://developer.apple.com/documentation/swift/sequence">a Sequence</a>, with Element being instances of RVS_BLEDevice (Bluetooth devices).
You can access them directly with subscripts (count returns the number of devices).</p>

<p>You will see that internal methods and properties are explicitly marked as <q>internal.</q> This is to help clarify their scope.</p>

<p>One of the goals of this driver is to abstract the <a href="https://developer.apple.com/documentation/corebluetooth">Core Bluetooth</a> stuff from the consumer, so it can be swapped out with things like USB or WiFi.</p>

<p>Internally, the driver will always run a <a href="https://developer.apple.com/documentation/corebluetooth/cbcentralmanager">CBCentralManager</a> instance.
It will scan for Bluetooth devices as <a href="https://developer.apple.com/documentation/corebluetooth/cbperipheral">peripherals</a>, and instantiate internal instances of <a href="https://github.com/RiftValleySoftware/RVS_BLEDriver/blob/master/RVS_BLEDriver/RVS_BLEDevice.swift">RVS_BLEDevice</a>
for each discovered peripheral device.</p>

<p>Since this receives delegate callbacks from <a href="https://developer.apple.com/documentation/corebluetooth">Core Bluetooth</a>, it must derive from <a href="https://developer.apple.com/documentation/objectivec/1418956-nsobject?language=occ">NSObject</a>.</p>

          </div>
        </section>

        <section class="section">
          <div class="section-content">
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Public%20Declaractions"></a>
                <a name="//apple_ref/swift/Section/Public Declaractions" class="dashAnchor"></a>
                <a href="#/Public%20Declaractions">
                  <h3 class="section-name">Public Declaractions</h3>
                </a>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:17RVS_BLEDriver_iOS0a1_B0C8delegate5queue24allowDuplicatesInBLEScan13stayConnectedAcA0a1_B8Delegate_p_So0c10_dispatch_E0CSgS2btcfc"></a>
                    <a name="//apple_ref/swift/Method/init(delegate:queue:allowDuplicatesInBLEScan:stayConnected:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:17RVS_BLEDriver_iOS0a1_B0C8delegate5queue24allowDuplicatesInBLEScan13stayConnectedAcA0a1_B8Delegate_p_So0c10_dispatch_E0CSgS2btcfc">init(delegate:queue:allowDuplicatesInBLEScan:stayConnected:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The main initializer.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">convenience</span> <span class="nf">init</span><span class="p">(</span><span class="n"><a href="../Classes/RVS_BLEDriver.html#/s:17RVS_BLEDriver_iOS0a1_B0C8delegateAA0a1_B8Delegate_pvp">delegate</a></span> <span class="nv">inDelegate</span><span class="p">:</span> <span class="kt"><a href="../Protocols/RVS_BLEDriverDelegate.html">RVS_BLEDriverDelegate</a></span><span class="p">,</span> <span class="n">queue</span> <span class="nv">inQueue</span><span class="p">:</span> <span class="kt">DispatchQueue</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">,</span> <span class="n">allowDuplicatesInBLEScan</span> <span class="nv">inAllowDuplicatesInBLEScan</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="n"><a href="../Classes/RVS_BLEDriver.html#/c:@CM@RVS_BLEDriver_iOS@objc(cs)RVS_BLEDriver(py)stayConnected">stayConnected</a></span> <span class="nv">inStayConnected</span><span class="p">:</span> <span class="kt">Bool</span> <span class="o">=</span> <span class="kc">false</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>delegate</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The delegate to be used with this instance. It cannot be nil, and is a weak reference.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>queue</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>This is a desired queue for the CB manager to operate from. It is optional, and default is nil (main queue).</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>allowDuplicatesInBLEScan</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>This is a flag that specifies that the scanner can be continuously running, and <q>re-finding</q> duplicate devices.
                                   If true, it could adversely affect battery life. Default is false.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>stayConnected</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>This is set to true, if you want all your device connections to be persistent. That is, once connected, they must be explicitly disconencted by the user.
                       Otherwise, each device will be connected only while interacting.
                       This is optional. Default is false.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Error%20Enums"></a>
                <a name="//apple_ref/swift/Section/Error Enums" class="dashAnchor"></a>
                <a href="#/Error%20Enums">
                  <h3 class="section-name">Error Enums</h3>
                </a>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:17RVS_BLEDriver_iOS0a1_B0C6ErrorsO"></a>
                    <a name="//apple_ref/swift/Enum/Errors" class="dashAnchor"></a>
                    <a class="token" href="#/s:17RVS_BLEDriver_iOS0a1_B0C6ErrorsO">Errors</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>These are the various errors that can be returned by this class.
The enum is designed to provide keys for use by localization. If you access the <q>localizedDescription</q> calculated property, you will get a consistent string.</p>

                        <a href="../Classes/RVS_BLEDriver/Errors.html" class="slightly-smaller">See more</a>
                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">Errors</span> <span class="p">:</span> <span class="kt">Error</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Public%20Calculated%20Instance%20Properties"></a>
                <a name="//apple_ref/swift/Section/Public Calculated Instance Properties" class="dashAnchor"></a>
                <a href="#/Public%20Calculated%20Instance%20Properties">
                  <h3 class="section-name">Public Calculated Instance Properties</h3>
                </a>
              </div>
              <ul class="item-container">
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:17RVS_BLEDriver_iOS0a1_B0C8delegateAA0a1_B8Delegate_pvp"></a>
                    <a name="//apple_ref/swift/Property/delegate" class="dashAnchor"></a>
                    <a class="token" href="#/s:17RVS_BLEDriver_iOS0a1_B0C8delegateAA0a1_B8Delegate_pvp">delegate</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This is our delegate instance. READ-ONLY
NOTE: This May not be in the main thread!</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="k">var</span> <span class="nv">delegate</span><span class="p">:</span> <span class="kt"><a href="../Protocols/RVS_BLEDriverDelegate.html">RVS_BLEDriverDelegate</a></span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@CM@RVS_BLEDriver_iOS@objc(cs)RVS_BLEDriver(py)isScanning"></a>
                    <a name="//apple_ref/swift/Property/isScanning" class="dashAnchor"></a>
                    <a class="token" href="#/c:@CM@RVS_BLEDriver_iOS@objc(cs)RVS_BLEDriver(py)isScanning">isScanning</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This is KVO-observable.
Returns true, if we are currently scanning for new CB peripherals.
NOTE: This May not be in the main thread!</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@objc</span>
<span class="kd">dynamic</span> <span class="kd">public</span> <span class="k">var</span> <span class="nv">isScanning</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@CM@RVS_BLEDriver_iOS@objc(cs)RVS_BLEDriver(py)isBluetoothAvailable"></a>
                    <a name="//apple_ref/swift/Property/isBluetoothAvailable" class="dashAnchor"></a>
                    <a class="token" href="#/c:@CM@RVS_BLEDriver_iOS@objc(cs)RVS_BLEDriver(py)isBluetoothAvailable">isBluetoothAvailable</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This is KVO-observable. READ-ONLY.
Returns true, if the bluetooth system is valid.
NOTE: This May not be in the main thread!</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@objc</span>
<span class="kd">dynamic</span> <span class="kd">public</span> <span class="k">var</span> <span class="nv">isBluetoothAvailable</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@CM@RVS_BLEDriver_iOS@objc(cs)RVS_BLEDriver(py)devices"></a>
                    <a name="//apple_ref/swift/Property/devices" class="dashAnchor"></a>
                    <a class="token" href="#/c:@CM@RVS_BLEDriver_iOS@objc(cs)RVS_BLEDriver(py)devices">devices</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This accesses the devices as a simple Array.
This is KVO-observable. READ-ONLY.
NOTE: This May not be in the main thread!</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@objc</span>
<span class="kd">dynamic</span> <span class="kd">public</span> <span class="k">var</span> <span class="nv">devices</span><span class="p">:</span> <span class="p">[</span><span class="kt"><a href="../Classes/RVS_BLEDevice.html">RVS_BLEDevice</a></span><span class="p">]</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/c:@CM@RVS_BLEDriver_iOS@objc(cs)RVS_BLEDriver(py)stayConnected"></a>
                    <a name="//apple_ref/swift/Property/stayConnected" class="dashAnchor"></a>
                    <a class="token" href="#/c:@CM@RVS_BLEDriver_iOS@objc(cs)RVS_BLEDriver(py)stayConnected">stayConnected</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This is a flag that tells us to remain connected continuously, until explicitly disconnected by the user. Default is false.
This is KVO-observable. READ/WRITE.
NOTE: This May not be in the main thread!</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@objc</span>
<span class="kd">dynamic</span> <span class="kd">public</span> <span class="k">var</span> <span class="nv">stayConnected</span><span class="p">:</span> <span class="kt">Bool</span> <span class="p">{</span> <span class="k">get</span> <span class="k">set</span> <span class="p">}</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </section>

      </article>
    </div>
    <section class="footer">
      <p>&copy; 2019 <a class="link" href="https://riftvalleysoftware.com" target="_blank" rel="external">The Great Rift Valley Software Company</a>. All rights reserved. (Last updated: 2019-10-04)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.11.2</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
